<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Glengala Fresh - Fresh Produce Online</title>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#2d5016">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Glengala Fresh">
    <link rel="apple-touch-icon" href="Glengala Logo.png">
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="shop-styles.css?v=20251127h">
    <link rel="stylesheet" href="checkout-styles.css?v=20251127h">
    <link rel="stylesheet" href="gamification-styles.css?v=20251127h">
    <link rel="stylesheet" href="onboarding-styles.css?v=20251127h">
    <link rel="stylesheet" href="rewards-styles.css?v=20251127h">
    

    
<script src="https://sites.super.myninja.ai/_assets/ninja-daytona-script.js"></script>
</head>
<body class="theme-dark">
    <div class="shop-container">
        <!-- Trust Ribbon -->
        <div class="trust-ribbon">
            ğŸ¥¬ We hand-pick the freshest produce from Melbourne's Epping Market. Wayne reviews every order and confirms the best options for you.
        </div>

        <div class="header">
            <!-- Language Toggle Above Logo -->
            <div class="language-toggle-container">
                <div class="language-selector">
                    <select id="languageSelect" class="language-select">
                        <option value="en">ğŸ‡¬ğŸ‡§ English</option>
                        <option value="el">ğŸ‡¬ğŸ‡· Î•Î»Î»Î·Î½Î¹ÎºÎ¬</option>
                        <option value="vi">ğŸ‡»ğŸ‡³ Tiáº¿ng Viá»‡t</option>
                        <option value="ar">AR Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
                        <option value="it">ğŸ‡®ğŸ‡¹ Italiano</option>
                    </select>
                </div>
            </div>
            
            
            <div class="header-content">
                <img src="Glengala Logo.png" alt="Glengala Fresh" class="logo">
                <h1 data-translate="shopTitle">Glengala Fresh</h1>
                <p class="shop-details" data-translate="shopDetails">Next day pickup or delivery â€¢ $8 delivery across 3020 â€¢ Free for orders over $50</p>
                
                <!-- Rewards Button -->
                <button class="rewards-button" onclick="glengalaRewards.openRewardsPanel()" id="rewardsButton">
                    <span class="rewards-icon">ğŸ†</span>
                    <span>Rewards</span>
                    <span class="rewards-badge" id="rewardsBadge" style="display:none;">0</span>
                </button>
            </div>
            
            <!-- Gamification Panel -->
            <div id="gamification-container"></div>
        </div>

        <!-- Shop Banner Section -->
        <div class="shop-banner" id="shopBanner" style="display: none;">
            <img id="bannerImage" src="" alt="Shop Banner">
        </div>

        <div class="search-bar">
            <input type="text" id="shopSearch" class="search-input" placeholder="ğŸ” Search for fresh produce...">
        </div>

        <div class="categories-container" id="categoriesContainer">
            <!-- Categories will be dynamically generated here -->
        </div>

    <!-- Cart Overlay - Full Screen Modal -->
    <div id="cartOverlay" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); z-index:2000; backdrop-filter:blur(4px);" onclick="closeCart(event)">
        <div id="cartModal" style="position:absolute; bottom:0; left:0; right:0; max-height:85vh; background:#1a1a1a; border-radius:20px 20px 0 0; overflow:hidden; display:flex; flex-direction:column;" onclick="event.stopPropagation()">
            <!-- Cart Header -->
            <div style="background:#222; padding:16px 20px; display:flex; justify-content:space-between; align-items:center; border-bottom:1px solid #333;">
                <h2 style="margin:0; color:#fff; font-size:1.3rem;">ğŸ›’ Your Cart</h2>
                <button onclick="closeCart()" style="background:none; border:none; color:#888; font-size:1.5rem; cursor:pointer; padding:4px 8px;">âœ•</button>
            </div>
            
            <!-- Cart Items - Scrollable -->
            <div id="cartItems" style="flex:1; overflow-y:auto; padding:16px; max-height:50vh;"></div>
            
            <!-- Cart Footer - Fixed at bottom -->
            <div style="background:#222; padding:16px 20px; border-top:1px solid #333;">
                <div id="cartTotal" style="margin-bottom:12px;"></div>
                <div style="display:flex; gap:10px;">
                    <button onclick="closeCart()" style="flex:1; background:#333; color:#fff; border:none; padding:14px; border-radius:10px; font-size:1rem; cursor:pointer;">
                        â† Continue Shopping
                    </button>
                    <button onclick="shop.checkout()" style="flex:1; background:#22c55e; color:#fff; border:none; padding:14px; border-radius:10px; font-size:1rem; font-weight:bold; cursor:pointer;">
                        Checkout â†’
                    </button>
                </div>
            </div>
        </div>
    </div>
    </div>



    <!-- Fixed Cart Button -->
    <div style="width:100%;display:flex;justify-content:center;position:fixed;bottom:80px;left:0;z-index:1000;pointer-events:auto;">
        <button class="checkout-btn" style="max-width:320px;width:90%;font-size:1.2rem;box-shadow:0 4px 15px rgba(34,197,94,0.4);position:relative;" onclick="openCart()">
            ğŸ›’ View Cart 
            <span id="cartCount" style="position:absolute;top:-8px;right:-8px;background:#ff4444;color:#fff;border-radius:50%;min-width:22px;height:22px;display:inline-flex;align-items:center;justify-content:center;font-size:0.85rem;font-weight:bold;">0</span>
        </button>
    </div>
    
    <div class="footer-menu">
    <a href="#" onclick="event.preventDefault(); glengalaOnboarding.showHowItWorks(true);">â“ How It Works</a>
    <a href="#" onclick="event.preventDefault(); showOurStory();">ğŸ“– Our Story</a>
    <a href="#" onclick="event.preventDefault(); showPricingInfo();">ğŸ’² How Pricing Works</a>
    <a href="#" onclick="event.preventDefault(); showContactInfo();">ğŸ“ Contact Info</a>
    </div>

    <!-- Our Story Modal -->
    <div id="ourStoryModal" class="story-modal" style="display: none;">
        <div class="story-modal-content">
            <span class="story-close" onclick="closeOurStory()">&times;</span>
            <h2>Our Story</h2>
            <div id="ourStoryContent">
                <p>Welcome to Glengala Fresh! We're passionate about bringing you the freshest produce from Melbourne's Epping Market.</p>
                <p>Wayne personally reviews every order to ensure you get the best quality products at the best prices.</p>
            </div>
        </div>
    </div>

    <!-- Pricing Info Modal -->
    <div id="pricingInfoModal" class="story-modal" style="display: none;">
        <div class="story-modal-content">
            <span class="story-close" onclick="closePricingInfo()">&times;</span>
            <h2>How Pricing Works</h2>
            <div id="pricingInfoContent">
                <p>Freshness first. We buy tightly at Melbourne's Epping Market so stock turns fast and your order is as fresh as possible.</p>
                <p>Wayne reviews every order. If today's market shifts (quality or availability), Wayne will text you options and confirm the best choice before payment.</p>
                <p>Quality grades:<br>
                <b>Premium</b> â€” Best appearance and size, peak flavour.<br>
                <b>First</b> â€” Great everyday quality and value.<br>
                <b>Second</b> â€” Cosmetic marks, still great eating, sharp price.</p>
            </div>
        </div>
    </div>

    <!-- Contact Info Modal -->
    <div id="contactInfoModal" class="story-modal" style="display: none;">
        <div class="story-modal-content">
            <span class="story-close" onclick="closeContactInfo()">&times;</span>
            <h2>Contact Info</h2>
            <div id="contactInfoContent">
                <p>Phone: 0400 000 000</p>
                <p>Email: info@glengalafresh.com.au</p>
                <p>Address: Albion, Melbourne VIC 3020</p>
            </div>
        </div>
    </div>

    <!-- Live Pricing Update Indicator -->
    <div id="last-price-update" class="last-update"></div>
    
    <!-- Refresh Prices Button -->
    <button id="refresh-prices-btn" class="refresh-prices-btn" onclick="livePricing.refreshPrices()">
        ğŸ”„ Refresh Prices
    </button>

    <script src="products-data.js"></script>
    <!-- Critical scripts first -->
    <script src="products-data.js"></script>
    <script src="translations.js"></script>
    
    <!-- Core functionality -->
    <script src="live-pricing.js?v=20251127h"></script>
    <script src="shop-functions-enhanced.js?v=20251127h"></script>
    <script src="checkout-system.js?v=20251127h"></script>
    
    <!-- Engagement & Rewards -->
    <script src="rewards-system.js?v=20251127h"></script>
    <script src="onboarding.js?v=20251127h"></script>
    
    <!-- Non-critical - defer loading -->
    <script src="gamification.js?v=20251127h" defer></script>
    <script src="in-app-notifications.js?v=20251127h" defer></script>
    <script src="push-notifications.js?v=20251127h" defer></script>
    <script>
        // Initialization script
        window.addEventListener('DOMContentLoaded', () => {
            
            // Update rewards badge
            setTimeout(() => {
                if (typeof glengalaRewards !== 'undefined') {
                    const freeDeliveries = glengalaRewards.getFreeDeliveryCount();
                    const badge = document.getElementById('rewardsBadge');
                    if (badge && freeDeliveries > 0) {
                        badge.textContent = freeDeliveries;
                        badge.style.display = 'inline-block';
                    }
                }
            }, 500);
        });
        
        // Register service worker for PWA
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/service-worker.js')
                .then(reg => console.log('Service Worker registered:', reg))
                .catch(err => console.error('Service Worker registration failed:', err));
        }
    </script>
</body>
</html>